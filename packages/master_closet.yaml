automation:
  - id: '8e954b7f-6483-495e-918a-651e12b1a501'
    alias: "Master Closet Motion Sensor Actions"
    description: "Turn on Master Closet Downlight when Master Closet Motion Sensor is triggered"
    mode: single
    trigger:
      - platform: state
        entity_id:
          - binary_sensor.master_closet_sensor_occupancy
        to: "on"
        id: master_closet_sensor_motion_detected
      - platform: state
        entity_id:
          - binary_sensor.master_closet_sensor_occupancy
        to: "off"
        id: master_closet_sensor_area_cleared
        for:
          hours: 0
          minutes: 10
          seconds: 0
    condition: []
    action:
      - choose:
          - conditions:
              - condition: trigger
                id:
                  - master_closet_sensor_motion_detected
            sequence:
              - service: light.turn_on
                metadata: {}
                data:
                  transition: 2
                  kelvin: 2700
                  brightness_pct: 100
                target:
                  entity_id: light.master_closet_downlight
          - conditions:
              - condition: trigger
                id:
                  - master_closet_sensor_area_cleared
            sequence:
              - service: light.turn_off
                metadata: {}
                data:
                  transition: 4
                target:
                  entity_id: light.master_closet_downlight
  
  - id: 'a7c07869-0aaa-4264-b10f-12f098302c00'
    alias: "Master Closet Switch turns the Light on or off"
    description: ""
    mode: single
    trigger:
      - platform: state
        entity_id:
          - light.master_closet_switch
        to: "on"
        id: master_closet_switch_on
      - platform: state
        entity_id:
          - light.master_closet_switch
        to: "off"
        id: master_closet_switch_off
    condition: []
    action:
      - choose:
          - conditions:
              - condition: trigger
                id:
                  - master_closet_switch_on
            sequence:
              - service: light.turn_on
                metadata: {}
                data:
                  kelvin: 2700
                  brightness_pct: 100
                  transition: 2
                target:
                  entity_id: light.master_closet_downlight
          - conditions:
              - condition: trigger
                id:
                  - master_closet_switch_off
            sequence:
              - service: light.turn_off
                metadata: {}
                data:
                  transition: 4
                target:
                  entity_id: light.master_closet_downlight
